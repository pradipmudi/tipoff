var Tipoff=function(){function u(e,t){var n=new(window.XMLHttpRequest||window.ActiveXObject)("MSXML2.XMLHTTP.3.0");n.open("POST",Tipoff.url,1),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.setRequestHeader("Content-type","application/json"),n.onreadystatechange=function(){3<n.readyState&&t&&t(n.responseText,n)},n.send(JSON.stringify(e))}return{version:"0.0.1",sendTip:function(e){try{if(!this.projectId||0===this.projectId.length||!this.url||0===this.url.length)return console.log("Tipoff setup is invalid. Call Tipoff.setup(<projectId>, <apiURL>) before sending Tips."),!1;if(!e)return console.log("Invalid arguments. Tip was not sent."),!1;var t=e.eventType;if(!t||t.length<=0)return console.log("eventType is missing.Tip was not sent. "),!1;var n=e.eventTitle;if(!n||n.length<=0)return console.log("eventTitle is missing.Tip was not sent. "),!1;var i=!!e.sendStackTrace&&e.sendStackTrace,o=e.error,s=e.tags?e.tags:[],r=e.note?e.note:[],a=e.user,c=e.callback,l=!!e.captureScreenshot&&e.captureScreenshot,d={projectId:this.projectId,eventType:t,eventTitle:n,tags:s,note:r,user:a};if(i){var p="";if(o)p=o.stack;else try{throw new Error}catch(e){p=e.stack}d.eventStack={stackTrace:p}}l?window.html2canvas(document.body,{allowTaint:!0,foreignObjectRendering:!0,height:document.querySelector("body").scrollHeight}).then(function(e){var t,n,i,o,s;d.screenshot=LZString.compressToUTF16((t=e,n=1080,i=document.createElement("canvas"),o=i.getContext("2d"),s=n/t.width,i.width=s*t.width,i.height=s*t.height,o.scale(s,s),o.drawImage(t,0,0),i.toDataURL())),u(d,c)}):u(d,c)}catch(e){console.log(e)}},setup:function(e,t){return e&&0!==e.length?t&&0!==t.length?(this.projectId=e,void(this.url=t)):(console.log("Tipoff setup is invalid. Valid url for Add Tip API is required. Tips will not be sent."),!1):(console.log("Tipoff setup is invalid. Valid projectId is required. Tips will not be sent."),!1)}}}();